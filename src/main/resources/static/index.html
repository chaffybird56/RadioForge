<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RadioForge Test Automation - Dashboard</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="36" height="36" rx="6" fill="#8b6f47"/>
                        <path d="M18 6C12.477 6 8 10.477 8 16C8 21.523 12.477 26 18 26" stroke="#faf8f4" stroke-width="2.5" stroke-linecap="round" fill="none"/>
                        <path d="M18 10C14.686 10 12 12.686 12 16C12 19.314 14.686 22 18 22" stroke="#faf8f4" stroke-width="2" stroke-linecap="round" fill="none"/>
                        <circle cx="18" cy="16" r="2" fill="#faf8f4"/>
                        <path d="M24 16L28 20M28 12L24 16" stroke="#faf8f4" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <h1>RadioForge Test Automation</h1>
                </div>
                <div class="header-actions">
                    <div class="status-indicator">
                        <span class="status-dot active"></span>
                        <span>System Online</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar">
                <nav class="nav">
                    <a href="#" class="nav-item active" data-section="dashboard">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M3 4C3 3.44772 3.44772 3 4 3H16C16.5523 3 17 3.44772 17 4V16C17 16.5523 16.5523 17 16 17H4C3.44772 17 3 16.5523 3 16V4Z" stroke="currentColor" stroke-width="2"/>
                            <path d="M3 8H17" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Dashboard
                    </a>
                    <a href="#" class="nav-item" data-section="test-cases">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M9 2C8.44772 2 8 2.44772 8 3V4H5C4.44772 4 4 4.44772 4 5V17C4 17.5523 4.44772 18 5 18H15C15.5523 18 16 17.5523 16 17V5C16 4.44772 15.5523 4 15 4H12V3C12 2.44772 11.5523 2 11 2H9Z" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Test Cases
                    </a>
                    <a href="#" class="nav-item" data-section="executions">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="2"/>
                            <path d="M10 6V10L13 13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        Executions
                    </a>
                    <a href="#" class="nav-item" data-section="reports">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M4 4H16V16H4V4Z" stroke="currentColor" stroke-width="2"/>
                            <path d="M4 8H16" stroke="currentColor" stroke-width="2"/>
                            <path d="M7 12H13" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Reports
                    </a>
                    <a href="#" class="nav-item" data-section="predictions">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M3 17L10 10L14 14L17 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M14 6H17V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Predictions
                    </a>
                    <a href="#" class="nav-item" data-section="instruments">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <rect x="3" y="5" width="14" height="10" rx="1" stroke="currentColor" stroke-width="2"/>
                            <path d="M6 8H14M6 11H12M6 14H10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            <circle cx="15" cy="11" r="1.5" fill="currentColor"/>
                        </svg>
                        Instruments
                    </a>
                </nav>
            </aside>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Dashboard Section -->
                <section id="dashboard" class="section active">
                    <div class="section-header">
                        <h2>Dashboard</h2>
                        <button class="btn btn-primary" onclick="runAllTests()">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M3 2L13 8L3 14V2Z" fill="currentColor"/>
                            </svg>
                            Run All Tests
                        </button>
                    </div>

                    <!-- Stats Cards -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon" style="background: var(--coffee-dark);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M9 11L12 14L22 4" stroke="#faf8f4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M21 12V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16" stroke="#faf8f4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="stat-passed">0</div>
                                <div class="stat-label">Tests Passed</div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon" style="background: #8b4513;">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <circle cx="12" cy="12" r="10" stroke="#faf8f4" stroke-width="2"/>
                                    <path d="M12 8V12" stroke="#faf8f4" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M12 16H12.01" stroke="#faf8f4" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="stat-failed">0</div>
                                <div class="stat-label">Tests Failed</div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon" style="background: var(--secondary);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="#faf8f4" stroke-width="2" stroke-linejoin="round"/>
                                    <path d="M2 17L12 22L22 17" stroke="#faf8f4" stroke-width="2" stroke-linejoin="round"/>
                                    <path d="M2 12L12 17L22 12" stroke="#faf8f4" stroke-width="2" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="stat-total">0</div>
                                <div class="stat-label">Total Tests</div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon" style="background: var(--success);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" stroke="#faf8f4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="stat-pass-rate">0%</div>
                                <div class="stat-label">Pass Rate</div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Executions -->
                    <div class="card">
                        <div class="card-header">
                            <h3>Recent Test Executions</h3>
                            <button class="btn-text" onclick="loadExecutions()">Refresh</button>
                        </div>
                        <div class="card-body">
                            <div class="table-container">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Test Case ID</th>
                                            <th>Technology</th>
                                            <th>Status</th>
                                            <th>Power Level</th>
                                            <th>EVM</th>
                                            <th>Duration</th>
                                            <th>Time</th>
                                        </tr>
                                    </thead>
                                    <tbody id="executions-table-body">
                                        <tr>
                                            <td colspan="7" class="empty-state">No executions yet. Run a test to get started.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Test Cases Section -->
                <section id="test-cases" class="section">
                    <div class="section-header">
                        <h2>Test Cases</h2>
                        <button class="btn btn-primary" onclick="showCreateTestCaseModal()">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M8 3V13M3 8H13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            Create Test Case
                        </button>
                    </div>

                    <div class="card">
                        <div class="card-body">
                            <div class="table-container">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Test Case ID</th>
                                            <th>Name</th>
                                            <th>Technology</th>
                                            <th>Category</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="test-cases-table-body">
                                        <tr>
                                            <td colspan="6" class="empty-state">Loading test cases...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Executions Section -->
                <section id="executions" class="section">
                    <div class="section-header">
                        <h2>Test Executions</h2>
                        <div class="filter-group">
                            <select id="status-filter" class="select" onchange="filterExecutions()">
                                <option value="">All Status</option>
                                <option value="PASSED">Passed</option>
                                <option value="FAILED">Failed</option>
                                <option value="RUNNING">Running</option>
                                <option value="ERROR">Error</option>
                            </select>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-body">
                            <div class="table-container">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Test Case</th>
                                            <th>Technology</th>
                                            <th>Status</th>
                                            <th>Power (dBm)</th>
                                            <th>EVM (%)</th>
                                            <th>ACPR (dB)</th>
                                            <th>Duration</th>
                                            <th>Time</th>
                                        </tr>
                                    </thead>
                                    <tbody id="all-executions-table-body">
                                        <tr>
                                            <td colspan="9" class="empty-state">Loading executions...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Reports Section -->
                <section id="reports" class="section">
                    <div class="section-header">
                        <h2>Test Reports</h2>
                        <button class="btn btn-primary" onclick="generateReport()">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M14 2H2V14H14V2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M5 8H11M5 11H9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            Generate Report
                        </button>
                    </div>

                    <div class="card">
                        <div class="card-body">
                            <div id="report-content" class="report-content">
                                <div class="empty-state">Generate a report to view statistics and analytics.</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Predictions Section -->
                <section id="predictions" class="section">
                    <div class="section-header">
                        <h2>Predictions & Analytics</h2>
                    </div>

                    <div class="card">
                        <div class="card-body">
                            <div class="prediction-form">
                                <label>Select Test Case:</label>
                                <select id="prediction-test-case" class="select">
                                    <option value="">Select a test case...</option>
                                </select>
                                <button class="btn btn-primary" onclick="loadPredictions()">Get Predictions</button>
                            </div>
                            <div id="prediction-results" class="prediction-results"></div>
                        </div>
                    </div>
                </section>

                <!-- Instruments Section -->
                <section id="instruments" class="section">
                    <div class="section-header">
                        <h2>RF Measurement Instruments</h2>
                        <button class="btn btn-primary" onclick="refreshInstruments()">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M8 3V1M8 15V13M13 8H15M1 8H3M12.364 12.364L13.778 13.778M2.222 2.222L3.636 3.636M12.364 3.636L13.778 2.222M2.222 13.778L3.636 12.364" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M8 11C9.65685 11 11 9.65685 11 8C11 6.34315 9.65685 5 8 5C6.34315 5 5 6.34315 5 8C5 9.65685 6.34315 11 8 11Z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            Refresh Status
                        </button>
                    </div>

                    <div class="instruments-grid">
                        <div class="instrument-card">
                            <div class="instrument-header">
                                <div class="instrument-icon" style="background: var(--coffee-dark);">
                                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                                        <rect x="6" y="8" width="20" height="16" rx="2" stroke="#faf8f4" stroke-width="2"/>
                                        <path d="M10 14H22M10 18H18M10 22H14" stroke="#faf8f4" stroke-width="1.5" stroke-linecap="round"/>
                                        <circle cx="24" cy="18" r="2" fill="#faf8f4"/>
                                    </svg>
                                </div>
                                <div class="instrument-info">
                                    <h3>Signal Generator</h3>
                                    <p class="instrument-id">SIGGEN-SIM-001</p>
                                </div>
                                <div class="instrument-status">
                                    <span class="status-badge passed" id="siggen-status">Connected</span>
                                </div>
                            </div>
                            <div class="instrument-details">
                                <div class="detail-row">
                                    <span class="detail-label">Frequency:</span>
                                    <span class="detail-value" id="siggen-freq">Not Set</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Power Level:</span>
                                    <span class="detail-value" id="siggen-power">Not Set</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Capabilities:</span>
                                    <span class="detail-value">Power, EVM, ACPR, Frequency</span>
                                </div>
                            </div>
                        </div>

                        <div class="instrument-card">
                            <div class="instrument-header">
                                <div class="instrument-icon" style="background: var(--secondary);">
                                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                                        <rect x="4" y="6" width="24" height="20" rx="2" stroke="#faf8f4" stroke-width="2"/>
                                        <path d="M8 12L12 16L16 14L20 18L24 12" stroke="#faf8f4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                                        <path d="M8 22H24" stroke="#faf8f4" stroke-width="1.5"/>
                                        <circle cx="26" cy="16" r="1.5" fill="#faf8f4"/>
                                    </svg>
                                </div>
                                <div class="instrument-info">
                                    <h3>Spectrum Analyzer</h3>
                                    <p class="instrument-id">SPECTRUM-ANALYZER-SIM-001</p>
                                </div>
                                <div class="instrument-status">
                                    <span class="status-badge passed" id="spectrum-status">Connected</span>
                                </div>
                            </div>
                            <div class="instrument-details">
                                <div class="detail-row">
                                    <span class="detail-label">Center Frequency:</span>
                                    <span class="detail-value" id="spectrum-freq">Not Set</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Reference Level:</span>
                                    <span class="detail-value" id="spectrum-ref">Not Set</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Capabilities:</span>
                                    <span class="detail-value">Power, EVM, ACPR, Frequency Offset</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card" style="margin-top: 2rem;">
                        <div class="card-header">
                            <h3>Instrument Visualizations</h3>
                        </div>
                        <div class="card-body">
                            <div class="charts-container">
                                <div class="chart-wrapper">
                                    <canvas id="signalGenChart"></canvas>
                                </div>
                                <div class="chart-wrapper">
                                    <canvas id="spectrumChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card" style="margin-top: 2rem;">
                        <div class="card-header">
                            <h3>Instrument Usage in Test Execution</h3>
                        </div>
                        <div class="card-body">
                            <div class="info-text">
                                <p><strong>Signal Generator:</strong> Used to generate RF test signals at specified frequencies and power levels. Configured based on test case parameters for 5G, LTE, W-CDMA, and GSM technologies. The signal generator outputs continuous wave (CW) or modulated signals for DUT testing.</p>
                                <p><strong>Spectrum Analyzer:</strong> Used to measure and analyze RF signals, including power levels, EVM (Error Vector Magnitude), ACPR (Adjacent Channel Power Ratio), and frequency accuracy. The spectrum analyzer provides frequency domain analysis with configurable resolution bandwidth and video bandwidth settings.</p>
                                <p>Both instruments are automatically initialized and configured during test execution. The framework supports instrument selection based on test requirements and can be extended to support additional RF measurement equipment such as network analyzers, power meters, and vector signal analyzers.</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="create-test-case-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create Test Case</h3>
                <button class="modal-close" onclick="closeModal('create-test-case-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="create-test-case-form" onsubmit="createTestCase(event)">
                    <div class="form-group">
                        <label>Test Case ID *</label>
                        <input type="text" id="tc-id" required class="input">
                    </div>
                    <div class="form-group">
                        <label>Name *</label>
                        <input type="text" id="tc-name" required class="input">
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="tc-description" class="input" rows="3"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Technology *</label>
                            <select id="tc-technology" required class="input">
                                <option value="5G">5G</option>
                                <option value="LTE">LTE</option>
                                <option value="W-CDMA">W-CDMA</option>
                                <option value="GSM">GSM</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Category *</label>
                            <select id="tc-category" required class="input">
                                <option value="Power">Power</option>
                                <option value="Frequency">Frequency</option>
                                <option value="Modulation">Modulation</option>
                                <option value="ACPR">ACPR</option>
                                <option value="EVM">EVM</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Expected Power Min (dBm)</label>
                            <input type="number" id="tc-power-min" step="0.01" class="input">
                        </div>
                        <div class="form-group">
                            <label>Expected Power Max (dBm)</label>
                            <input type="number" id="tc-power-max" step="0.01" class="input">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Expected Frequency (Hz)</label>
                        <input type="number" id="tc-frequency" step="0.01" class="input">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Expected EVM Max (%)</label>
                            <input type="number" id="tc-evm-max" step="0.01" class="input">
                        </div>
                        <div class="form-group">
                            <label>Expected ACPR Max (dB)</label>
                            <input type="number" id="tc-acpr-max" step="0.01" class="input">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeModal('create-test-case-modal')">Cancel</button>
                        <button type="submit" class="btn btn-primary">Create</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="/js/charts.js"></script>
    <script src="/js/app.js"></script>
</body>
</html>

